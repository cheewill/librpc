\hypertarget{service_8h}{\section{/home/travis/build/twoporeguys/librpc/include/rpc/service.h File Reference}
\label{service_8h}\index{/home/travis/build/twoporeguys/librpc/include/rpc/service.\-h@{/home/travis/build/twoporeguys/librpc/include/rpc/service.\-h}}
}
{\ttfamily \#include $<$rpc/object.\-h$>$}\\*
{\ttfamily \#include $<$rpc/connection.\-h$>$}\\*
Include dependency graph for service.\-h\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{service_8h__incl}
\end{center}
\end{figure}
This graph shows which files directly or indirectly include this file\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=323pt]{service_8h__dep__incl}
\end{center}
\end{figure}
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structrpc__method}{rpc\-\_\-method}
\end{DoxyCompactItemize}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\hypertarget{service_8h_a4c7094875a0bd8cc87e7c1d24a4481a6}{\#define {\bfseries R\-P\-C\-\_\-\-F\-U\-N\-C\-T\-I\-O\-N\-\_\-\-S\-T\-I\-L\-L\-\_\-\-R\-U\-N\-N\-I\-N\-G}~((rpc\-\_\-object\-\_\-t)1)}\label{service_8h_a4c7094875a0bd8cc87e7c1d24a4481a6}

\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
\hypertarget{service_8h_a55087f28cb63ff45b6c798a5dabaedd7}{typedef struct rpc\-\_\-context $\ast$ {\bfseries rpc\-\_\-context\-\_\-t}}\label{service_8h_a55087f28cb63ff45b6c798a5dabaedd7}

\item 
\hypertarget{service_8h_aacbe55ace3fb9f574028b8d4ed28bb70}{typedef rpc\-\_\-object\-\_\-t($^\wedge$ {\bfseries rpc\-\_\-function\-\_\-t} )(void $\ast$cookie, rpc\-\_\-object\-\_\-t args)}\label{service_8h_aacbe55ace3fb9f574028b8d4ed28bb70}

\item 
\hypertarget{service_8h_a9aa88314a3b4620186bf3142798a708c}{typedef rpc\-\_\-object\-\_\-t($\ast$ {\bfseries rpc\-\_\-function\-\_\-f} )(void $\ast$cookie, rpc\-\_\-object\-\_\-t args)}\label{service_8h_a9aa88314a3b4620186bf3142798a708c}

\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
rpc\-\_\-context\-\_\-t \hyperlink{service_8h_a2f099d270db1d46696878337c20d1bdd}{rpc\-\_\-context\-\_\-create} (void)
\item 
void \hyperlink{service_8h_ae62c27a53aea99a9c87e5b12b3d3cbbc}{rpc\-\_\-context\-\_\-free} (rpc\-\_\-context\-\_\-t context)
\item 
\hypertarget{service_8h_a58869381d832749fab98830cb5a75e46}{struct \hyperlink{structrpc__method}{rpc\-\_\-method} $\ast$ {\bfseries rpc\-\_\-context\-\_\-find\-\_\-method} (rpc\-\_\-context\-\_\-t, const char $\ast$name)}\label{service_8h_a58869381d832749fab98830cb5a75e46}

\item 
\hypertarget{service_8h_abd3ce744fe6091cf188b1f44b31548da}{int {\bfseries rpc\-\_\-context\-\_\-register\-\_\-method} (rpc\-\_\-context\-\_\-t context, struct \hyperlink{structrpc__method}{rpc\-\_\-method} $\ast$m)}\label{service_8h_abd3ce744fe6091cf188b1f44b31548da}

\item 
\hypertarget{service_8h_af83b298b11aec4f97c0db5d4391b0be7}{int {\bfseries rpc\-\_\-context\-\_\-register\-\_\-block} (rpc\-\_\-context\-\_\-t context, const char $\ast$name, const char $\ast$descr, void $\ast$arg, rpc\-\_\-function\-\_\-t func)}\label{service_8h_af83b298b11aec4f97c0db5d4391b0be7}

\item 
\hypertarget{service_8h_a6de78771a848fe3b2001e08a7cf0a88c}{int {\bfseries rpc\-\_\-context\-\_\-register\-\_\-func} (rpc\-\_\-context\-\_\-t context, const char $\ast$name, const char $\ast$descr, void $\ast$arg, rpc\-\_\-function\-\_\-f func)}\label{service_8h_a6de78771a848fe3b2001e08a7cf0a88c}

\item 
\hypertarget{service_8h_ab71a7949b47080bceed777eab0cb4c67}{int {\bfseries rpc\-\_\-context\-\_\-unregister\-\_\-method} (rpc\-\_\-context\-\_\-t context, const char $\ast$name)}\label{service_8h_ab71a7949b47080bceed777eab0cb4c67}

\item 
\hypertarget{service_8h_a206fab24804db208f9b4d44f4c303596}{rpc\-\_\-call\-\_\-t {\bfseries rpc\-\_\-context\-\_\-dispatch\-\_\-call} (rpc\-\_\-context\-\_\-t context, const char $\ast$name, rpc\-\_\-object\-\_\-t args)}\label{service_8h_a206fab24804db208f9b4d44f4c303596}

\item 
void $\ast$ \hyperlink{service_8h_a62e71e6c0208e7ed1e23e2f9f3cd78f2}{rpc\-\_\-function\-\_\-get\-\_\-arg} (void $\ast$cookie)
\item 
void \hyperlink{service_8h_a1b73c8714198994d5055bf5cfe3012a4}{rpc\-\_\-function\-\_\-respond} (void $\ast$cookie, rpc\-\_\-object\-\_\-t object)
\item 
void \hyperlink{service_8h_ad7d639f2063a65279f159175a473b881}{rpc\-\_\-function\-\_\-error} (void $\ast$cookie, int code, const char $\ast$message,...)
\item 
\hypertarget{service_8h_acfe4732dbbfa89a8b2972e80b6d65de1}{void {\bfseries rpc\-\_\-function\-\_\-error\-\_\-ex} (void $\ast$cookie, rpc\-\_\-object\-\_\-t exception)}\label{service_8h_acfe4732dbbfa89a8b2972e80b6d65de1}

\item 
int \hyperlink{service_8h_a36b4ff5a09f3a8139f1d5b59ab930139}{rpc\-\_\-function\-\_\-yield} (void $\ast$cookie, rpc\-\_\-object\-\_\-t fragment)
\item 
void \hyperlink{service_8h_a7e912e42af9c3899e74e1ef539ca7e50}{rpc\-\_\-function\-\_\-end} (void $\ast$cookie)
\item 
bool \hyperlink{service_8h_a23fb9149cf7ad5bfdec4bc24fd805617}{rpc\-\_\-function\-\_\-should\-\_\-abort} (void $\ast$cookie)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
R\-P\-C service A\-P\-I. 

Definition in file \hyperlink{service_8h_source}{service.\-h}.



\subsection{Function Documentation}
\hypertarget{service_8h_a2f099d270db1d46696878337c20d1bdd}{\index{service.\-h@{service.\-h}!rpc\-\_\-context\-\_\-create@{rpc\-\_\-context\-\_\-create}}
\index{rpc\-\_\-context\-\_\-create@{rpc\-\_\-context\-\_\-create}!service.h@{service.\-h}}
\subsubsection[{rpc\-\_\-context\-\_\-create}]{\setlength{\rightskip}{0pt plus 5cm}rpc\-\_\-context\-\_\-t rpc\-\_\-context\-\_\-create (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{service_8h_a2f099d270db1d46696878337c20d1bdd}
Creates a new R\-P\-C context.

\begin{DoxyReturn}{Returns}
Newly created R\-P\-C context object. 
\end{DoxyReturn}
\hypertarget{service_8h_ae62c27a53aea99a9c87e5b12b3d3cbbc}{\index{service.\-h@{service.\-h}!rpc\-\_\-context\-\_\-free@{rpc\-\_\-context\-\_\-free}}
\index{rpc\-\_\-context\-\_\-free@{rpc\-\_\-context\-\_\-free}!service.h@{service.\-h}}
\subsubsection[{rpc\-\_\-context\-\_\-free}]{\setlength{\rightskip}{0pt plus 5cm}void rpc\-\_\-context\-\_\-free (
\begin{DoxyParamCaption}
\item[{rpc\-\_\-context\-\_\-t}]{context}
\end{DoxyParamCaption}
)}}\label{service_8h_ae62c27a53aea99a9c87e5b12b3d3cbbc}
Disposes existing R\-P\-C context and frees all associated resources.


\begin{DoxyParams}{Parameters}
{\em context} & Context to dispose \\
\hline
\end{DoxyParams}
\hypertarget{service_8h_a7e912e42af9c3899e74e1ef539ca7e50}{\index{service.\-h@{service.\-h}!rpc\-\_\-function\-\_\-end@{rpc\-\_\-function\-\_\-end}}
\index{rpc\-\_\-function\-\_\-end@{rpc\-\_\-function\-\_\-end}!service.h@{service.\-h}}
\subsubsection[{rpc\-\_\-function\-\_\-end}]{\setlength{\rightskip}{0pt plus 5cm}void rpc\-\_\-function\-\_\-end (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{cookie}
\end{DoxyParamCaption}
)}}\label{service_8h_a7e912e42af9c3899e74e1ef539ca7e50}
Ends a streaming response.

When that function is called, sending further responses (either singular, streaming or error responses) is not allowed. Return value of a method functions is ignored.


\begin{DoxyParams}{Parameters}
{\em cookie} & Running call identifier \\
\hline
\end{DoxyParams}
\hypertarget{service_8h_ad7d639f2063a65279f159175a473b881}{\index{service.\-h@{service.\-h}!rpc\-\_\-function\-\_\-error@{rpc\-\_\-function\-\_\-error}}
\index{rpc\-\_\-function\-\_\-error@{rpc\-\_\-function\-\_\-error}!service.h@{service.\-h}}
\subsubsection[{rpc\-\_\-function\-\_\-error}]{\setlength{\rightskip}{0pt plus 5cm}void rpc\-\_\-function\-\_\-error (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{cookie, }
\item[{int}]{code, }
\item[{const char $\ast$}]{message, }
\item[{}]{...}
\end{DoxyParamCaption}
)}}\label{service_8h_ad7d639f2063a65279f159175a473b881}
Sends an error response to a call.

This function may be called only once during the lifetime of a single call (for a given cookie). When called, return value of a method is silently ignored (it is preferred to return N\-U\-L\-L).

When called in a streaming function, implicitly ends streaming response.


\begin{DoxyParams}{Parameters}
{\em cookie} & Running call identifier \\
\hline
{\em code} & Error (errno) code \\
\hline
{\em message} & Error message format \\
\hline
{\em ...} & Format arguments \\
\hline
\end{DoxyParams}
\hypertarget{service_8h_a62e71e6c0208e7ed1e23e2f9f3cd78f2}{\index{service.\-h@{service.\-h}!rpc\-\_\-function\-\_\-get\-\_\-arg@{rpc\-\_\-function\-\_\-get\-\_\-arg}}
\index{rpc\-\_\-function\-\_\-get\-\_\-arg@{rpc\-\_\-function\-\_\-get\-\_\-arg}!service.h@{service.\-h}}
\subsubsection[{rpc\-\_\-function\-\_\-get\-\_\-arg}]{\setlength{\rightskip}{0pt plus 5cm}void$\ast$ rpc\-\_\-function\-\_\-get\-\_\-arg (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{cookie}
\end{DoxyParamCaption}
)}}\label{service_8h_a62e71e6c0208e7ed1e23e2f9f3cd78f2}
Returns the argument associated with metod.


\begin{DoxyParams}{Parameters}
{\em cookie} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}

\end{DoxyReturn}
\hypertarget{service_8h_a1b73c8714198994d5055bf5cfe3012a4}{\index{service.\-h@{service.\-h}!rpc\-\_\-function\-\_\-respond@{rpc\-\_\-function\-\_\-respond}}
\index{rpc\-\_\-function\-\_\-respond@{rpc\-\_\-function\-\_\-respond}!service.h@{service.\-h}}
\subsubsection[{rpc\-\_\-function\-\_\-respond}]{\setlength{\rightskip}{0pt plus 5cm}void rpc\-\_\-function\-\_\-respond (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{cookie, }
\item[{rpc\-\_\-object\-\_\-t}]{object}
\end{DoxyParamCaption}
)}}\label{service_8h_a1b73c8714198994d5055bf5cfe3012a4}
Sends a response to a call.

This function may be called only once during the lifetime of a single call (for a given cookie). When called, return value of a method is silently ignored (it is preferred to return N\-U\-L\-L).


\begin{DoxyParams}{Parameters}
{\em cookie} & Running call identifier \\
\hline
{\em object} & Response \\
\hline
\end{DoxyParams}
\hypertarget{service_8h_a23fb9149cf7ad5bfdec4bc24fd805617}{\index{service.\-h@{service.\-h}!rpc\-\_\-function\-\_\-should\-\_\-abort@{rpc\-\_\-function\-\_\-should\-\_\-abort}}
\index{rpc\-\_\-function\-\_\-should\-\_\-abort@{rpc\-\_\-function\-\_\-should\-\_\-abort}!service.h@{service.\-h}}
\subsubsection[{rpc\-\_\-function\-\_\-should\-\_\-abort}]{\setlength{\rightskip}{0pt plus 5cm}bool rpc\-\_\-function\-\_\-should\-\_\-abort (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{cookie}
\end{DoxyParamCaption}
)}}\label{service_8h_a23fb9149cf7ad5bfdec4bc24fd805617}
Returns the value of a flag saying whether or not a method should immediately stop because it was aborted on the client side.


\begin{DoxyParams}{Parameters}
{\em cookie} & Running call identifier \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Whether or not function should abort 
\end{DoxyReturn}
\hypertarget{service_8h_a36b4ff5a09f3a8139f1d5b59ab930139}{\index{service.\-h@{service.\-h}!rpc\-\_\-function\-\_\-yield@{rpc\-\_\-function\-\_\-yield}}
\index{rpc\-\_\-function\-\_\-yield@{rpc\-\_\-function\-\_\-yield}!service.h@{service.\-h}}
\subsubsection[{rpc\-\_\-function\-\_\-yield}]{\setlength{\rightskip}{0pt plus 5cm}int rpc\-\_\-function\-\_\-yield (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{cookie, }
\item[{rpc\-\_\-object\-\_\-t}]{fragment}
\end{DoxyParamCaption}
)}}\label{service_8h_a36b4ff5a09f3a8139f1d5b59ab930139}
Generates a new value in a streaming response.


\begin{DoxyParams}{Parameters}
{\em cookie} & \\
\hline
{\em fragment} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}

\end{DoxyReturn}

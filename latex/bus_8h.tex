\hypertarget{bus_8h}{}\section{/code/include/rpc/bus.h File Reference}
\label{bus_8h}\index{/code/include/rpc/bus.\+h@{/code/include/rpc/bus.\+h}}
{\ttfamily \#include $<$stdint.\+h$>$}\newline
Include dependency graph for bus.\+h\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=207pt]{bus_8h__incl}
\end{center}
\end{figure}
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structrpc__bus__node}{rpc\+\_\+bus\+\_\+node}
\end{DoxyCompactItemize}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{bus_8h_aaa8f0d5a3405318f9df38fc2ae8dd587}{R\+P\+C\+\_\+\+B\+U\+S\+\_\+\+E\+V\+E\+N\+T\+\_\+\+H\+A\+N\+D\+L\+ER}(\+\_\+fn,  \+\_\+arg)
\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef void($^\wedge$ \hyperlink{bus_8h_a77cfaa0d7a20750369e9aba0e226a5b5}{rpc\+\_\+bus\+\_\+event\+\_\+handler\+\_\+t}) (\hyperlink{bus_8h_a38a66d3c4093e9ca458510dd2eea7ba7}{rpc\+\_\+bus\+\_\+event\+\_\+t} event, struct \hyperlink{structrpc__bus__node}{rpc\+\_\+bus\+\_\+node} $\ast$\+\_\+\+Nonnull node)
\end{DoxyCompactItemize}
\subsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum \hyperlink{bus_8h_a38a66d3c4093e9ca458510dd2eea7ba7}{rpc\+\_\+bus\+\_\+event\+\_\+t} \{ \hyperlink{bus_8h_a38a66d3c4093e9ca458510dd2eea7ba7a254ff6e09f83f70511fad76529666af5}{R\+P\+C\+\_\+\+B\+U\+S\+\_\+\+A\+T\+T\+A\+C\+H\+ED}, 
\hyperlink{bus_8h_a38a66d3c4093e9ca458510dd2eea7ba7a511c831e9b160756cb2bbcfc587427c6}{R\+P\+C\+\_\+\+B\+U\+S\+\_\+\+D\+E\+T\+A\+C\+H\+ED}
 \}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{bus_8h_a845c8c255ac97bb03ac9ad1418eb66f0}{rpc\+\_\+bus\+\_\+open} (void)
\item 
int \hyperlink{bus_8h_a5fa0c254755deec118b2e3dcb4ec9bdf}{rpc\+\_\+bus\+\_\+close} (void)
\item 
int \hyperlink{bus_8h_ac4f30e57bd3b17725db2e517e7cf72a4}{rpc\+\_\+bus\+\_\+ping} (const char $\ast$\+\_\+\+Nonnull serial)
\item 
int \hyperlink{bus_8h_a7dfb66a85e5f3037635a95b693d39a97}{rpc\+\_\+bus\+\_\+enumerate} (struct \hyperlink{structrpc__bus__node}{rpc\+\_\+bus\+\_\+node} $\ast$\+\_\+\+Nullable $\ast$\+\_\+\+Nonnull result)
\item 
void \hyperlink{bus_8h_a7a0ada5e8a9c567b1e7d18297e1cde42}{rpc\+\_\+bus\+\_\+free\+\_\+result} (struct \hyperlink{structrpc__bus__node}{rpc\+\_\+bus\+\_\+node} $\ast$\+\_\+\+Nonnull result)
\item 
void \hyperlink{bus_8h_adbc9a5badea0314236b1ccabb060e090}{rpc\+\_\+bus\+\_\+register\+\_\+event\+\_\+handler} (\+\_\+\+Nonnull \hyperlink{bus_8h_a77cfaa0d7a20750369e9aba0e226a5b5}{rpc\+\_\+bus\+\_\+event\+\_\+handler\+\_\+t} handler)
\item 
void \hyperlink{bus_8h_ae6437acd78bb490baac4517ddffb0792}{rpc\+\_\+bus\+\_\+unregister\+\_\+event\+\_\+handler} (void)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Bus transport A\+PI 

\subsection{Macro Definition Documentation}
\mbox{\Hypertarget{bus_8h_aaa8f0d5a3405318f9df38fc2ae8dd587}\label{bus_8h_aaa8f0d5a3405318f9df38fc2ae8dd587}} 
\index{bus.\+h@{bus.\+h}!R\+P\+C\+\_\+\+B\+U\+S\+\_\+\+E\+V\+E\+N\+T\+\_\+\+H\+A\+N\+D\+L\+ER@{R\+P\+C\+\_\+\+B\+U\+S\+\_\+\+E\+V\+E\+N\+T\+\_\+\+H\+A\+N\+D\+L\+ER}}
\index{R\+P\+C\+\_\+\+B\+U\+S\+\_\+\+E\+V\+E\+N\+T\+\_\+\+H\+A\+N\+D\+L\+ER@{R\+P\+C\+\_\+\+B\+U\+S\+\_\+\+E\+V\+E\+N\+T\+\_\+\+H\+A\+N\+D\+L\+ER}!bus.\+h@{bus.\+h}}
\subsubsection{\texorpdfstring{R\+P\+C\+\_\+\+B\+U\+S\+\_\+\+E\+V\+E\+N\+T\+\_\+\+H\+A\+N\+D\+L\+ER}{RPC\_BUS\_EVENT\_HANDLER}}
{\footnotesize\ttfamily \#define R\+P\+C\+\_\+\+B\+U\+S\+\_\+\+E\+V\+E\+N\+T\+\_\+\+H\+A\+N\+D\+L\+ER(\begin{DoxyParamCaption}\item[{}]{\+\_\+fn,  }\item[{}]{\+\_\+arg }\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}
^(\hyperlink{bus_8h_a38a66d3c4093e9ca458510dd2eea7ba7}{rpc\_bus\_event\_t} \_event, \textcolor{keyword}{struct }\hyperlink{structrpc__bus__node}{rpc\_bus\_node} *\_node) \{      \(\backslash\)
            \_fn(\_arg, \_event, \_node);                   \(\backslash\)
    \}
\end{DoxyCode}
Converts function pointer to an \hyperlink{bus_8h_a38a66d3c4093e9ca458510dd2eea7ba7}{rpc\+\_\+bus\+\_\+event\+\_\+t} block type. 

Definition at line 73 of file bus.\+h.



\subsection{Typedef Documentation}
\mbox{\Hypertarget{bus_8h_a77cfaa0d7a20750369e9aba0e226a5b5}\label{bus_8h_a77cfaa0d7a20750369e9aba0e226a5b5}} 
\index{bus.\+h@{bus.\+h}!rpc\+\_\+bus\+\_\+event\+\_\+handler\+\_\+t@{rpc\+\_\+bus\+\_\+event\+\_\+handler\+\_\+t}}
\index{rpc\+\_\+bus\+\_\+event\+\_\+handler\+\_\+t@{rpc\+\_\+bus\+\_\+event\+\_\+handler\+\_\+t}!bus.\+h@{bus.\+h}}
\subsubsection{\texorpdfstring{rpc\+\_\+bus\+\_\+event\+\_\+handler\+\_\+t}{rpc\_bus\_event\_handler\_t}}
{\footnotesize\ttfamily typedef void($^\wedge$ rpc\+\_\+bus\+\_\+event\+\_\+handler\+\_\+t) (\hyperlink{bus_8h_a38a66d3c4093e9ca458510dd2eea7ba7}{rpc\+\_\+bus\+\_\+event\+\_\+t} event, struct \hyperlink{structrpc__bus__node}{rpc\+\_\+bus\+\_\+node} $\ast$\+\_\+\+Nonnull node)}

Hotplug event handler callback block type. 

Definition at line 67 of file bus.\+h.



\subsection{Enumeration Type Documentation}
\mbox{\Hypertarget{bus_8h_a38a66d3c4093e9ca458510dd2eea7ba7}\label{bus_8h_a38a66d3c4093e9ca458510dd2eea7ba7}} 
\index{bus.\+h@{bus.\+h}!rpc\+\_\+bus\+\_\+event\+\_\+t@{rpc\+\_\+bus\+\_\+event\+\_\+t}}
\index{rpc\+\_\+bus\+\_\+event\+\_\+t@{rpc\+\_\+bus\+\_\+event\+\_\+t}!bus.\+h@{bus.\+h}}
\subsubsection{\texorpdfstring{rpc\+\_\+bus\+\_\+event\+\_\+t}{rpc\_bus\_event\_t}}
{\footnotesize\ttfamily enum \hyperlink{bus_8h_a38a66d3c4093e9ca458510dd2eea7ba7}{rpc\+\_\+bus\+\_\+event\+\_\+t}}

Bus hot-\/plug event type. \begin{DoxyEnumFields}{Enumerator}
\raisebox{\heightof{T}}[0pt][0pt]{\index{R\+P\+C\+\_\+\+B\+U\+S\+\_\+\+A\+T\+T\+A\+C\+H\+ED@{R\+P\+C\+\_\+\+B\+U\+S\+\_\+\+A\+T\+T\+A\+C\+H\+ED}!bus.\+h@{bus.\+h}}\index{bus.\+h@{bus.\+h}!R\+P\+C\+\_\+\+B\+U\+S\+\_\+\+A\+T\+T\+A\+C\+H\+ED@{R\+P\+C\+\_\+\+B\+U\+S\+\_\+\+A\+T\+T\+A\+C\+H\+ED}}}\mbox{\Hypertarget{bus_8h_a38a66d3c4093e9ca458510dd2eea7ba7a254ff6e09f83f70511fad76529666af5}\label{bus_8h_a38a66d3c4093e9ca458510dd2eea7ba7a254ff6e09f83f70511fad76529666af5}} 
R\+P\+C\+\_\+\+B\+U\+S\+\_\+\+A\+T\+T\+A\+C\+H\+ED&Device attached to the system \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{R\+P\+C\+\_\+\+B\+U\+S\+\_\+\+D\+E\+T\+A\+C\+H\+ED@{R\+P\+C\+\_\+\+B\+U\+S\+\_\+\+D\+E\+T\+A\+C\+H\+ED}!bus.\+h@{bus.\+h}}\index{bus.\+h@{bus.\+h}!R\+P\+C\+\_\+\+B\+U\+S\+\_\+\+D\+E\+T\+A\+C\+H\+ED@{R\+P\+C\+\_\+\+B\+U\+S\+\_\+\+D\+E\+T\+A\+C\+H\+ED}}}\mbox{\Hypertarget{bus_8h_a38a66d3c4093e9ca458510dd2eea7ba7a511c831e9b160756cb2bbcfc587427c6}\label{bus_8h_a38a66d3c4093e9ca458510dd2eea7ba7a511c831e9b160756cb2bbcfc587427c6}} 
R\+P\+C\+\_\+\+B\+U\+S\+\_\+\+D\+E\+T\+A\+C\+H\+ED&Device detached from the system \\
\hline

\end{DoxyEnumFields}


Definition at line 45 of file bus.\+h.



\subsection{Function Documentation}
\mbox{\Hypertarget{bus_8h_a5fa0c254755deec118b2e3dcb4ec9bdf}\label{bus_8h_a5fa0c254755deec118b2e3dcb4ec9bdf}} 
\index{bus.\+h@{bus.\+h}!rpc\+\_\+bus\+\_\+close@{rpc\+\_\+bus\+\_\+close}}
\index{rpc\+\_\+bus\+\_\+close@{rpc\+\_\+bus\+\_\+close}!bus.\+h@{bus.\+h}}
\subsubsection{\texorpdfstring{rpc\+\_\+bus\+\_\+close()}{rpc\_bus\_close()}}
{\footnotesize\ttfamily int rpc\+\_\+bus\+\_\+close (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}

Closes the librpc bus connection.

\begin{DoxyReturn}{Returns}
0 on success, -\/1 on error 
\end{DoxyReturn}
\mbox{\Hypertarget{bus_8h_a7dfb66a85e5f3037635a95b693d39a97}\label{bus_8h_a7dfb66a85e5f3037635a95b693d39a97}} 
\index{bus.\+h@{bus.\+h}!rpc\+\_\+bus\+\_\+enumerate@{rpc\+\_\+bus\+\_\+enumerate}}
\index{rpc\+\_\+bus\+\_\+enumerate@{rpc\+\_\+bus\+\_\+enumerate}!bus.\+h@{bus.\+h}}
\subsubsection{\texorpdfstring{rpc\+\_\+bus\+\_\+enumerate()}{rpc\_bus\_enumerate()}}
{\footnotesize\ttfamily int rpc\+\_\+bus\+\_\+enumerate (\begin{DoxyParamCaption}\item[{struct \hyperlink{structrpc__bus__node}{rpc\+\_\+bus\+\_\+node} $\ast$\+\_\+\+Nullable $\ast$\+\_\+\+Nonnull}]{result }\end{DoxyParamCaption})}

Enumerates connected devices on the R\+PC bus.


\begin{DoxyParams}{Parameters}
{\em result} & Array of \hyperlink{structrpc__bus__node}{rpc\+\_\+bus\+\_\+node} elements \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success, -\/1 on error 
\end{DoxyReturn}
\mbox{\Hypertarget{bus_8h_a7a0ada5e8a9c567b1e7d18297e1cde42}\label{bus_8h_a7a0ada5e8a9c567b1e7d18297e1cde42}} 
\index{bus.\+h@{bus.\+h}!rpc\+\_\+bus\+\_\+free\+\_\+result@{rpc\+\_\+bus\+\_\+free\+\_\+result}}
\index{rpc\+\_\+bus\+\_\+free\+\_\+result@{rpc\+\_\+bus\+\_\+free\+\_\+result}!bus.\+h@{bus.\+h}}
\subsubsection{\texorpdfstring{rpc\+\_\+bus\+\_\+free\+\_\+result()}{rpc\_bus\_free\_result()}}
{\footnotesize\ttfamily void rpc\+\_\+bus\+\_\+free\+\_\+result (\begin{DoxyParamCaption}\item[{struct \hyperlink{structrpc__bus__node}{rpc\+\_\+bus\+\_\+node} $\ast$\+\_\+\+Nonnull}]{result }\end{DoxyParamCaption})}

Frees struct \hyperlink{structrpc__bus__node}{rpc\+\_\+bus\+\_\+node} array obtained in \hyperlink{bus_8h_a7dfb66a85e5f3037635a95b693d39a97}{rpc\+\_\+bus\+\_\+enumerate} call.


\begin{DoxyParams}{Parameters}
{\em result} & Array of struct \hyperlink{structrpc__bus__node}{rpc\+\_\+bus\+\_\+node} elements \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{bus_8h_a845c8c255ac97bb03ac9ad1418eb66f0}\label{bus_8h_a845c8c255ac97bb03ac9ad1418eb66f0}} 
\index{bus.\+h@{bus.\+h}!rpc\+\_\+bus\+\_\+open@{rpc\+\_\+bus\+\_\+open}}
\index{rpc\+\_\+bus\+\_\+open@{rpc\+\_\+bus\+\_\+open}!bus.\+h@{bus.\+h}}
\subsubsection{\texorpdfstring{rpc\+\_\+bus\+\_\+open()}{rpc\_bus\_open()}}
{\footnotesize\ttfamily int rpc\+\_\+bus\+\_\+open (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}

Opens the librpc bus connection.

\begin{DoxyReturn}{Returns}
0 on success, -\/1 on error 
\end{DoxyReturn}
\mbox{\Hypertarget{bus_8h_ac4f30e57bd3b17725db2e517e7cf72a4}\label{bus_8h_ac4f30e57bd3b17725db2e517e7cf72a4}} 
\index{bus.\+h@{bus.\+h}!rpc\+\_\+bus\+\_\+ping@{rpc\+\_\+bus\+\_\+ping}}
\index{rpc\+\_\+bus\+\_\+ping@{rpc\+\_\+bus\+\_\+ping}!bus.\+h@{bus.\+h}}
\subsubsection{\texorpdfstring{rpc\+\_\+bus\+\_\+ping()}{rpc\_bus\_ping()}}
{\footnotesize\ttfamily int rpc\+\_\+bus\+\_\+ping (\begin{DoxyParamCaption}\item[{const char $\ast$\+\_\+\+Nonnull}]{serial }\end{DoxyParamCaption})}

Checks whether a node with specified serial is reachable.


\begin{DoxyParams}{Parameters}
{\em serial} & Node serial number \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 if reachable, -\/1 otherwise 
\end{DoxyReturn}
\mbox{\Hypertarget{bus_8h_adbc9a5badea0314236b1ccabb060e090}\label{bus_8h_adbc9a5badea0314236b1ccabb060e090}} 
\index{bus.\+h@{bus.\+h}!rpc\+\_\+bus\+\_\+register\+\_\+event\+\_\+handler@{rpc\+\_\+bus\+\_\+register\+\_\+event\+\_\+handler}}
\index{rpc\+\_\+bus\+\_\+register\+\_\+event\+\_\+handler@{rpc\+\_\+bus\+\_\+register\+\_\+event\+\_\+handler}!bus.\+h@{bus.\+h}}
\subsubsection{\texorpdfstring{rpc\+\_\+bus\+\_\+register\+\_\+event\+\_\+handler()}{rpc\_bus\_register\_event\_handler()}}
{\footnotesize\ttfamily void rpc\+\_\+bus\+\_\+register\+\_\+event\+\_\+handler (\begin{DoxyParamCaption}\item[{\+\_\+\+Nonnull \hyperlink{bus_8h_a77cfaa0d7a20750369e9aba0e226a5b5}{rpc\+\_\+bus\+\_\+event\+\_\+handler\+\_\+t}}]{handler }\end{DoxyParamCaption})}

Configures an event handler block to be called whenever a bus event occurs.


\begin{DoxyParams}{Parameters}
{\em handler} & Bus event handler \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{bus_8h_ae6437acd78bb490baac4517ddffb0792}\label{bus_8h_ae6437acd78bb490baac4517ddffb0792}} 
\index{bus.\+h@{bus.\+h}!rpc\+\_\+bus\+\_\+unregister\+\_\+event\+\_\+handler@{rpc\+\_\+bus\+\_\+unregister\+\_\+event\+\_\+handler}}
\index{rpc\+\_\+bus\+\_\+unregister\+\_\+event\+\_\+handler@{rpc\+\_\+bus\+\_\+unregister\+\_\+event\+\_\+handler}!bus.\+h@{bus.\+h}}
\subsubsection{\texorpdfstring{rpc\+\_\+bus\+\_\+unregister\+\_\+event\+\_\+handler()}{rpc\_bus\_unregister\_event\_handler()}}
{\footnotesize\ttfamily void rpc\+\_\+bus\+\_\+unregister\+\_\+event\+\_\+handler (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}

Unsets the previously set event handler. If there was no handler previously configured, does nothing. 
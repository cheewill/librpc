\hypertarget{server_8h}{}\section{/code/include/rpc/server.h File Reference}
\label{server_8h}\index{/code/include/rpc/server.\+h@{/code/include/rpc/server.\+h}}
{\ttfamily \#include $<$stdbool.\+h$>$}\\*
{\ttfamily \#include $<$rpc/service.\+h$>$}\\*
{\ttfamily \#include $<$rpc/connection.\+h$>$}\\*
Include dependency graph for server.\+h\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{server_8h__incl}
\end{center}
\end{figure}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{server_8h_a34749fc2472ddb06c6d36006e2a948c3}{R\+P\+C\+\_\+\+S\+E\+R\+V\+E\+R\+\_\+\+H\+A\+N\+D\+L\+ER}(\+\_\+fn,  \+\_\+arg)
\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef struct rpc\+\_\+server $\ast$ \hyperlink{server_8h_a46fd27cbcf75a54103df9d51d90a7fca}{rpc\+\_\+server\+\_\+t}
\item 
typedef void($^\wedge$ \hyperlink{server_8h_a2d9a540637c63449db9ac5882cb5f7ab}{rpc\+\_\+server\+\_\+event\+\_\+handler\+\_\+t}) (\+\_\+\+Nonnull \hyperlink{connection_8h_a70838cb106c3464db299522c5fe2782d}{rpc\+\_\+connection\+\_\+t} source, const char $\ast$\+\_\+\+Nonnull name, \+\_\+\+Nonnull \hyperlink{object_8h_ab365f726b4975c0c8376b808d111d01b}{rpc\+\_\+object\+\_\+t} args)
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\+\_\+\+Nullable \hyperlink{server_8h_a46fd27cbcf75a54103df9d51d90a7fca}{rpc\+\_\+server\+\_\+t} \hyperlink{server_8h_a2d524c3d5822d34b46f1d8552bf7ede0}{rpc\+\_\+server\+\_\+create} (const char $\ast$\+\_\+\+Nonnull uri, \+\_\+\+Nonnull \hyperlink{service_8h_a55087f28cb63ff45b6c798a5dabaedd7}{rpc\+\_\+context\+\_\+t} context)
\item 
void \hyperlink{server_8h_a28eeff2b8ec73f31f1af9feff11cb698}{rpc\+\_\+server\+\_\+broadcast\+\_\+event} (\+\_\+\+Nonnull \hyperlink{server_8h_a46fd27cbcf75a54103df9d51d90a7fca}{rpc\+\_\+server\+\_\+t} server, const char $\ast$\+\_\+\+Nullable path, const char $\ast$\+\_\+\+Nullable interface, const char $\ast$\+\_\+\+Nonnull name, \+\_\+\+Nullable \hyperlink{object_8h_ab365f726b4975c0c8376b808d111d01b}{rpc\+\_\+object\+\_\+t} args)
\item 
void \hyperlink{server_8h_ac6bfcd59fe8ec8386b1e3d312705e786}{rpc\+\_\+server\+\_\+set\+\_\+event\+\_\+handler} (\+\_\+\+Nullable \hyperlink{server_8h_a2d9a540637c63449db9ac5882cb5f7ab}{rpc\+\_\+server\+\_\+event\+\_\+handler\+\_\+t} handler)
\item 
int \hyperlink{server_8h_a1bf6070b1bb3b31d394f3862405eaf8c}{rpc\+\_\+server\+\_\+close} (\+\_\+\+Nonnull \hyperlink{server_8h_a46fd27cbcf75a54103df9d51d90a7fca}{rpc\+\_\+server\+\_\+t} server)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
R\+PC server A\+PI. 

\subsection{Macro Definition Documentation}
\index{server.\+h@{server.\+h}!R\+P\+C\+\_\+\+S\+E\+R\+V\+E\+R\+\_\+\+H\+A\+N\+D\+L\+ER@{R\+P\+C\+\_\+\+S\+E\+R\+V\+E\+R\+\_\+\+H\+A\+N\+D\+L\+ER}}
\index{R\+P\+C\+\_\+\+S\+E\+R\+V\+E\+R\+\_\+\+H\+A\+N\+D\+L\+ER@{R\+P\+C\+\_\+\+S\+E\+R\+V\+E\+R\+\_\+\+H\+A\+N\+D\+L\+ER}!server.\+h@{server.\+h}}
\subsubsection[{\texorpdfstring{R\+P\+C\+\_\+\+S\+E\+R\+V\+E\+R\+\_\+\+H\+A\+N\+D\+L\+ER}{RPC_SERVER_HANDLER}}]{\setlength{\rightskip}{0pt plus 5cm}\#define R\+P\+C\+\_\+\+S\+E\+R\+V\+E\+R\+\_\+\+H\+A\+N\+D\+L\+ER(
\begin{DoxyParamCaption}
\item[{}]{\+\_\+fn, }
\item[{}]{\+\_\+arg}
\end{DoxyParamCaption}
)}\hypertarget{server_8h_a34749fc2472ddb06c6d36006e2a948c3}{}\label{server_8h_a34749fc2472ddb06c6d36006e2a948c3}
{\bfseries Value\+:}
\begin{DoxyCode}
^(\hyperlink{connection_8h_a70838cb106c3464db299522c5fe2782d}{rpc\_connection\_t} \_source, \textcolor{keyword}{const} \textcolor{keywordtype}{char} *\_name, \hyperlink{object_8h_ab365f726b4975c0c8376b808d111d01b}{rpc\_object\_t} \_args) \{    \(\backslash\)
        \_fn(\_arg, \_source, \_name, \_args);               \(\backslash\)
    \}
\end{DoxyCode}
Converts function pointer to a \hyperlink{server_8h_a2d9a540637c63449db9ac5882cb5f7ab}{rpc\+\_\+server\+\_\+event\+\_\+handler\+\_\+t} block type. 

Definition at line 64 of file server.\+h.



\subsection{Typedef Documentation}
\index{server.\+h@{server.\+h}!rpc\+\_\+server\+\_\+event\+\_\+handler\+\_\+t@{rpc\+\_\+server\+\_\+event\+\_\+handler\+\_\+t}}
\index{rpc\+\_\+server\+\_\+event\+\_\+handler\+\_\+t@{rpc\+\_\+server\+\_\+event\+\_\+handler\+\_\+t}!server.\+h@{server.\+h}}
\subsubsection[{\texorpdfstring{rpc\+\_\+server\+\_\+event\+\_\+handler\+\_\+t}{rpc_server_event_handler_t}}]{\setlength{\rightskip}{0pt plus 5cm}typedef void($^\wedge$ rpc\+\_\+server\+\_\+event\+\_\+handler\+\_\+t) (\+\_\+\+Nonnull {\bf rpc\+\_\+connection\+\_\+t} source, const char $\ast$\+\_\+\+Nonnull name, \+\_\+\+Nonnull {\bf rpc\+\_\+object\+\_\+t} args)}\hypertarget{server_8h_a2d9a540637c63449db9ac5882cb5f7ab}{}\label{server_8h_a2d9a540637c63449db9ac5882cb5f7ab}
Definition of R\+PC server event handler block type. 

Definition at line 58 of file server.\+h.

\index{server.\+h@{server.\+h}!rpc\+\_\+server\+\_\+t@{rpc\+\_\+server\+\_\+t}}
\index{rpc\+\_\+server\+\_\+t@{rpc\+\_\+server\+\_\+t}!server.\+h@{server.\+h}}
\subsubsection[{\texorpdfstring{rpc\+\_\+server\+\_\+t}{rpc_server_t}}]{\setlength{\rightskip}{0pt plus 5cm}typedef struct rpc\+\_\+server$\ast$ {\bf rpc\+\_\+server\+\_\+t}}\hypertarget{server_8h_a46fd27cbcf75a54103df9d51d90a7fca}{}\label{server_8h_a46fd27cbcf75a54103df9d51d90a7fca}
R\+PC server pointer structure definition. 

Definition at line 53 of file server.\+h.



\subsection{Function Documentation}
\index{server.\+h@{server.\+h}!rpc\+\_\+server\+\_\+broadcast\+\_\+event@{rpc\+\_\+server\+\_\+broadcast\+\_\+event}}
\index{rpc\+\_\+server\+\_\+broadcast\+\_\+event@{rpc\+\_\+server\+\_\+broadcast\+\_\+event}!server.\+h@{server.\+h}}
\subsubsection[{\texorpdfstring{rpc\+\_\+server\+\_\+broadcast\+\_\+event(\+\_\+\+Nonnull rpc\+\_\+server\+\_\+t server, const char $\ast$\+\_\+\+Nullable path, const char $\ast$\+\_\+\+Nullable interface, const char $\ast$\+\_\+\+Nonnull name, \+\_\+\+Nullable rpc\+\_\+object\+\_\+t args)}{rpc_server_broadcast_event(_Nonnull rpc_server_t server, const char *_Nullable path, const char *_Nullable interface, const char *_Nonnull name, _Nullable rpc_object_t args)}}]{\setlength{\rightskip}{0pt plus 5cm}void rpc\+\_\+server\+\_\+broadcast\+\_\+event (
\begin{DoxyParamCaption}
\item[{\+\_\+\+Nonnull {\bf rpc\+\_\+server\+\_\+t}}]{server, }
\item[{const char $\ast$\+\_\+\+Nullable}]{path, }
\item[{const char $\ast$\+\_\+\+Nullable}]{interface, }
\item[{const char $\ast$\+\_\+\+Nonnull}]{name, }
\item[{\+\_\+\+Nullable {\bf rpc\+\_\+object\+\_\+t}}]{args}
\end{DoxyParamCaption}
)}\hypertarget{server_8h_a28eeff2b8ec73f31f1af9feff11cb698}{}\label{server_8h_a28eeff2b8ec73f31f1af9feff11cb698}
Broadcasts an event of a given name among its subscribers.


\begin{DoxyParams}{Parameters}
{\em server} & Target server. \\
\hline
{\em name} & Name of an event to be broadcasted. \\
\hline
{\em args} & Event arguments. \\
\hline
\end{DoxyParams}
\index{server.\+h@{server.\+h}!rpc\+\_\+server\+\_\+close@{rpc\+\_\+server\+\_\+close}}
\index{rpc\+\_\+server\+\_\+close@{rpc\+\_\+server\+\_\+close}!server.\+h@{server.\+h}}
\subsubsection[{\texorpdfstring{rpc\+\_\+server\+\_\+close(\+\_\+\+Nonnull rpc\+\_\+server\+\_\+t server)}{rpc_server_close(_Nonnull rpc_server_t server)}}]{\setlength{\rightskip}{0pt plus 5cm}int rpc\+\_\+server\+\_\+close (
\begin{DoxyParamCaption}
\item[{\+\_\+\+Nonnull {\bf rpc\+\_\+server\+\_\+t}}]{server}
\end{DoxyParamCaption}
)}\hypertarget{server_8h_a1bf6070b1bb3b31d394f3862405eaf8c}{}\label{server_8h_a1bf6070b1bb3b31d394f3862405eaf8c}
Closes a given R\+PC server.


\begin{DoxyParams}{Parameters}
{\em server} & Server to be closed. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on successful teardown. 
\end{DoxyReturn}
\index{server.\+h@{server.\+h}!rpc\+\_\+server\+\_\+create@{rpc\+\_\+server\+\_\+create}}
\index{rpc\+\_\+server\+\_\+create@{rpc\+\_\+server\+\_\+create}!server.\+h@{server.\+h}}
\subsubsection[{\texorpdfstring{rpc\+\_\+server\+\_\+create(const char $\ast$\+\_\+\+Nonnull uri, \+\_\+\+Nonnull rpc\+\_\+context\+\_\+t context)}{rpc_server_create(const char *_Nonnull uri, _Nonnull rpc_context_t context)}}]{\setlength{\rightskip}{0pt plus 5cm}\+\_\+\+Nullable {\bf rpc\+\_\+server\+\_\+t} rpc\+\_\+server\+\_\+create (
\begin{DoxyParamCaption}
\item[{const char $\ast$\+\_\+\+Nonnull}]{uri, }
\item[{\+\_\+\+Nonnull {\bf rpc\+\_\+context\+\_\+t}}]{context}
\end{DoxyParamCaption}
)}\hypertarget{server_8h_a2d524c3d5822d34b46f1d8552bf7ede0}{}\label{server_8h_a2d524c3d5822d34b46f1d8552bf7ede0}
Creates a server instance listening on a given U\+RI.


\begin{DoxyParams}{Parameters}
{\em uri} & U\+RI to listen on. \\
\hline
{\em context} & R\+PC context for a server instance. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Server structure. 
\end{DoxyReturn}
\index{server.\+h@{server.\+h}!rpc\+\_\+server\+\_\+set\+\_\+event\+\_\+handler@{rpc\+\_\+server\+\_\+set\+\_\+event\+\_\+handler}}
\index{rpc\+\_\+server\+\_\+set\+\_\+event\+\_\+handler@{rpc\+\_\+server\+\_\+set\+\_\+event\+\_\+handler}!server.\+h@{server.\+h}}
\subsubsection[{\texorpdfstring{rpc\+\_\+server\+\_\+set\+\_\+event\+\_\+handler(\+\_\+\+Nullable rpc\+\_\+server\+\_\+event\+\_\+handler\+\_\+t handler)}{rpc_server_set_event_handler(_Nullable rpc_server_event_handler_t handler)}}]{\setlength{\rightskip}{0pt plus 5cm}void rpc\+\_\+server\+\_\+set\+\_\+event\+\_\+handler (
\begin{DoxyParamCaption}
\item[{\+\_\+\+Nullable {\bf rpc\+\_\+server\+\_\+event\+\_\+handler\+\_\+t}}]{handler}
\end{DoxyParamCaption}
)}\hypertarget{server_8h_ac6bfcd59fe8ec8386b1e3d312705e786}{}\label{server_8h_ac6bfcd59fe8ec8386b1e3d312705e786}
Creates an event handler internal to a server for an event of a given name.


\begin{DoxyParams}{Parameters}
{\em handler} & \\
\hline
\end{DoxyParams}

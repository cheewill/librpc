<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>librpc: /code/include/rpc/query.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">librpc
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_26df6c18271b4ec683b70d44ac22bed0.html">rpc</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">query.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="object_8h_source.html">rpc/object.h</a>&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for query.h:</div>
<div class="dyncontent">
<div class="center"><img src="query_8h__incl.png" border="0" usemap="#_2code_2include_2rpc_2query_8h" alt=""/></div>
<map name="_2code_2include_2rpc_2query_8h" id="_2code_2include_2rpc_2query_8h">
<area shape="rect" id="node2" href="object_8h.html" title="rpc/object.h" alt="" coords="195,80,294,107"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="query_8h__dep__incl.png" border="0" usemap="#_2code_2include_2rpc_2query_8hdep" alt=""/></div>
<map name="_2code_2include_2rpc_2query_8hdep" id="_2code_2include_2rpc_2query_8hdep">
<area shape="rect" id="node2" href="rpc_8h_source.html" title="/code/include/rpc/rpc.h" alt="" coords="13,80,181,107"/>
</map>
</div>
</div>
<p><a href="query_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structrpc__query__params.html">rpc_query_params</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ac5142dc38666b2011833bab884b6af9d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="query_8h.html#ac5142dc38666b2011833bab884b6af9d">RPC_QUERY_CB</a>(_fn,  _arg)</td></tr>
<tr class="separator:ac5142dc38666b2011833bab884b6af9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a927ba6540a1cd3a2f2cf5d20b39fdadd"><td class="memItemLeft" align="right" valign="top">typedef struct rpc_query_iter *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="query_8h.html#a927ba6540a1cd3a2f2cf5d20b39fdadd">rpc_query_iter_t</a></td></tr>
<tr class="separator:a927ba6540a1cd3a2f2cf5d20b39fdadd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e4187b74c3bd970f9e41bb2d02d09a0"><td class="memItemLeft" align="right" valign="top">typedef _Nullable <a class="el" href="object_8h.html#ab365f726b4975c0c8376b808d111d01b">rpc_object_t</a>(^&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="query_8h.html#a2e4187b74c3bd970f9e41bb2d02d09a0">rpc_query_cb_t</a>) (_Nonnull <a class="el" href="object_8h.html#ab365f726b4975c0c8376b808d111d01b">rpc_object_t</a> object)</td></tr>
<tr class="separator:a2e4187b74c3bd970f9e41bb2d02d09a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a831694aa25fae9a6c3243911c3defb94"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structrpc__query__params.html">rpc_query_params</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="query_8h.html#a831694aa25fae9a6c3243911c3defb94">rpc_query_params_t</a></td></tr>
<tr class="separator:a831694aa25fae9a6c3243911c3defb94"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a6b66ceac8404c2581558e4fa3dfc048e"><td class="memItemLeft" align="right" valign="top">_Nullable <a class="el" href="object_8h.html#ab365f726b4975c0c8376b808d111d01b">rpc_object_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="query_8h.html#a6b66ceac8404c2581558e4fa3dfc048e">rpc_query_get</a> (_Nonnull <a class="el" href="object_8h.html#ab365f726b4975c0c8376b808d111d01b">rpc_object_t</a> object, const char *_Nonnull path, _Nullable <a class="el" href="object_8h.html#ab365f726b4975c0c8376b808d111d01b">rpc_object_t</a> default_val)</td></tr>
<tr class="separator:a6b66ceac8404c2581558e4fa3dfc048e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03159f0ef216c368c85ea63dd5a6cd64"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="query_8h.html#a03159f0ef216c368c85ea63dd5a6cd64">rpc_query_set</a> (_Nonnull <a class="el" href="object_8h.html#ab365f726b4975c0c8376b808d111d01b">rpc_object_t</a> object, const char *_Nonnull path, _Nullable <a class="el" href="object_8h.html#ab365f726b4975c0c8376b808d111d01b">rpc_object_t</a> value, bool steal)</td></tr>
<tr class="separator:a03159f0ef216c368c85ea63dd5a6cd64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af59ef4e3522115f09116bf7048738de4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="query_8h.html#af59ef4e3522115f09116bf7048738de4">rpc_query_delete</a> (_Nonnull <a class="el" href="object_8h.html#ab365f726b4975c0c8376b808d111d01b">rpc_object_t</a> object, const char *_Nonnull path)</td></tr>
<tr class="separator:af59ef4e3522115f09116bf7048738de4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a530296c952ff239de8b91371227d36ba"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="query_8h.html#a530296c952ff239de8b91371227d36ba">rpc_query_contains</a> (_Nonnull <a class="el" href="object_8h.html#ab365f726b4975c0c8376b808d111d01b">rpc_object_t</a> object, const char *_Nonnull path)</td></tr>
<tr class="separator:a530296c952ff239de8b91371227d36ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e66848b79c142525768cfebfa9cf0e6"><td class="memItemLeft" align="right" valign="top">_Nullable <a class="el" href="query_8h.html#a927ba6540a1cd3a2f2cf5d20b39fdadd">rpc_query_iter_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="query_8h.html#a5e66848b79c142525768cfebfa9cf0e6">rpc_query</a> (_Nonnull <a class="el" href="object_8h.html#ab365f726b4975c0c8376b808d111d01b">rpc_object_t</a> object, _Nullable <a class="el" href="query_8h.html#a831694aa25fae9a6c3243911c3defb94">rpc_query_params_t</a> params, _Nullable <a class="el" href="object_8h.html#ab365f726b4975c0c8376b808d111d01b">rpc_object_t</a> rules)</td></tr>
<tr class="separator:a5e66848b79c142525768cfebfa9cf0e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a674e1f4b009fc26f19dd33d0c5d0b10d"><td class="memItemLeft" align="right" valign="top">_Nullable <a class="el" href="query_8h.html#a927ba6540a1cd3a2f2cf5d20b39fdadd">rpc_query_iter_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="query_8h.html#a674e1f4b009fc26f19dd33d0c5d0b10d">rpc_query_fmt</a> (_Nonnull <a class="el" href="object_8h.html#ab365f726b4975c0c8376b808d111d01b">rpc_object_t</a> object, _Nonnull <a class="el" href="query_8h.html#a831694aa25fae9a6c3243911c3defb94">rpc_query_params_t</a> params, const char *_Nonnull rules_fmt,...)</td></tr>
<tr class="separator:a674e1f4b009fc26f19dd33d0c5d0b10d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad32074f2b7671ae25b4076d085423a0f"><td class="memItemLeft" align="right" valign="top">_Nullable <a class="el" href="object_8h.html#ab365f726b4975c0c8376b808d111d01b">rpc_object_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="query_8h.html#ad32074f2b7671ae25b4076d085423a0f">rpc_query_apply</a> (_Nonnull <a class="el" href="object_8h.html#ab365f726b4975c0c8376b808d111d01b">rpc_object_t</a> object, _Nonnull <a class="el" href="object_8h.html#ab365f726b4975c0c8376b808d111d01b">rpc_object_t</a> rules)</td></tr>
<tr class="separator:ad32074f2b7671ae25b4076d085423a0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a979b1dfd5f0fb3be66501ed3c7df3f78"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="query_8h.html#a979b1dfd5f0fb3be66501ed3c7df3f78">rpc_query_next</a> (_Nonnull <a class="el" href="query_8h.html#a927ba6540a1cd3a2f2cf5d20b39fdadd">rpc_query_iter_t</a> iter, _Nonnull <a class="el" href="object_8h.html#ab365f726b4975c0c8376b808d111d01b">rpc_object_t</a> *_Nullable chunk)</td></tr>
<tr class="separator:a979b1dfd5f0fb3be66501ed3c7df3f78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acfa3a9a25b98a0acd3a64c7c222e5f99"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="query_8h.html#acfa3a9a25b98a0acd3a64c7c222e5f99">rpc_query_iter_free</a> (_Nonnull <a class="el" href="query_8h.html#a927ba6540a1cd3a2f2cf5d20b39fdadd">rpc_query_iter_t</a> iter)</td></tr>
<tr class="separator:acfa3a9a25b98a0acd3a64c7c222e5f99"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Object query API </p>

<p class="definition">Definition in file <a class="el" href="query_8h_source.html">query.h</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ac5142dc38666b2011833bab884b6af9d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5142dc38666b2011833bab884b6af9d">&#9670;&nbsp;</a></span>RPC_QUERY_CB</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RPC_QUERY_CB</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_fn, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_arg&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">^(<a class="code" href="object_8h.html#ab365f726b4975c0c8376b808d111d01b">rpc_object_t</a> _object) {                   \</div><div class="line">                return ((<a class="code" href="object_8h.html#ab365f726b4975c0c8376b808d111d01b">rpc_object_t</a>)_fn(_arg, _object));      \</div><div class="line">        }</div><div class="ttc" id="object_8h_html_ab365f726b4975c0c8376b808d111d01b"><div class="ttname"><a href="object_8h.html#ab365f726b4975c0c8376b808d111d01b">rpc_object_t</a></div><div class="ttdeci">struct rpc_object * rpc_object_t</div><div class="ttdef"><b>Definition:</b> <a href="object_8h_source.html#l00073">object.h:73</a></div></div>
</div><!-- fragment --><p>Converts function pointer to an rpc_query_cb_t block type. </p>

<p class="definition">Definition at line <a class="el" href="query_8h_source.html#l00073">73</a> of file <a class="el" href="query_8h_source.html">query.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="a2e4187b74c3bd970f9e41bb2d02d09a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e4187b74c3bd970f9e41bb2d02d09a0">&#9670;&nbsp;</a></span>rpc_query_cb_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef _Nullable <a class="el" href="object_8h.html#ab365f726b4975c0c8376b808d111d01b">rpc_object_t</a>(^ rpc_query_cb_t) (_Nonnull <a class="el" href="object_8h.html#ab365f726b4975c0c8376b808d111d01b">rpc_object_t</a> object)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Definition of query callback block type.</p>
<p>Query functions are checking if that block is defined within <a class="el" href="structrpc__query__params.html">rpc_query_params</a> structure provided to the query function - if so, then body of the callback is being executed for each of the elements matching query, before yielding them as results. Output of the callback block becomes effectively the output of a query function.</p>
<p>Keep in mind that returning NULL from the callback block is considered as skipping currently processed chunk of the result - query function won't return NULL, but look for the next matching element instead. </p>

<p class="definition">Definition at line <a class="el" href="query_8h_source.html#l00068">68</a> of file <a class="el" href="query_8h_source.html">query.h</a>.</p>

</div>
</div>
<a id="a927ba6540a1cd3a2f2cf5d20b39fdadd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a927ba6540a1cd3a2f2cf5d20b39fdadd">&#9670;&nbsp;</a></span>rpc_query_iter_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct rpc_query_iter* <a class="el" href="query_8h.html#a927ba6540a1cd3a2f2cf5d20b39fdadd">rpc_query_iter_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Definition of rpc_query_iter pointer type. </p>

<p class="definition">Definition at line <a class="el" href="query_8h_source.html#l00053">53</a> of file <a class="el" href="query_8h_source.html">query.h</a>.</p>

</div>
</div>
<a id="a831694aa25fae9a6c3243911c3defb94"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a831694aa25fae9a6c3243911c3defb94">&#9670;&nbsp;</a></span>rpc_query_params_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structrpc__query__params.html">rpc_query_params</a>* <a class="el" href="query_8h.html#a831694aa25fae9a6c3243911c3defb94">rpc_query_params_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Definition of <a class="el" href="structrpc__query__params.html">rpc_query_params</a> pointer type. </p>

<p class="definition">Definition at line <a class="el" href="query_8h_source.html#l00114">114</a> of file <a class="el" href="query_8h_source.html">query.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a5e66848b79c142525768cfebfa9cf0e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e66848b79c142525768cfebfa9cf0e6">&#9670;&nbsp;</a></span>rpc_query()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_Nullable <a class="el" href="query_8h.html#a927ba6540a1cd3a2f2cf5d20b39fdadd">rpc_query_iter_t</a> rpc_query </td>
          <td>(</td>
          <td class="paramtype">_Nonnull <a class="el" href="object_8h.html#ab365f726b4975c0c8376b808d111d01b">rpc_object_t</a>&#160;</td>
          <td class="paramname"><em>object</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">_Nullable <a class="el" href="query_8h.html#a831694aa25fae9a6c3243911c3defb94">rpc_query_params_t</a>&#160;</td>
          <td class="paramname"><em>params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">_Nullable <a class="el" href="object_8h.html#ab365f726b4975c0c8376b808d111d01b">rpc_object_t</a>&#160;</td>
          <td class="paramname"><em>rules</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Performs a query operation on a given object. Source object has to be an RPC object of array type, but it can contain any sequence of internal data objects.</p>
<p>The function immediately returns iterator object without performing any initial operations on the input data. To get actual data, user has to use the rpc_query_next function, providing iterator as an argument.</p>
<p>Params arguments defines query runtime parameters - precise definition of possible options could be found in <a class="el" href="structrpc__query__params.html">rpc_query_params</a> documentation.</p>
<p>Each of the processed array's elements is checked against the rules. If it matches the rules, then it can be yielded from the query.</p>
<p>Rules are describes as 2 or 3 element arrays. 3 element arrays describe logic operators and 2 element arrays describe field operators.</p>
<p>First argument of logic operator describes a tested path within a processed object (i.e "a.b.c.0"), second argument is a string describing the logic operator itself and the last one is the value provided externally by the user as a second operand of a logic comparison.</p>
<p>There are following logic operators allowed (B - right operand, A - left operand):</p><ul>
<li>= - equal - A = B</li>
<li>!= - not equal - A != B</li>
<li>&gt; - greater - A &gt; B</li>
<li>&lt; - smaller - A &lt; B</li>
<li>&gt;= - greater or equal - A &gt;= B</li>
<li>&lt;= - smaller or equal - A &lt;= B</li>
<li>~ - regular expression (PCRE) - A matches B rules</li>
<li>in - value in array - A in B (when B is an array) or B in A (when A is an array)</li>
<li>nin - value not in array - A not in B (when B is an array) or B not in A (when A is an array)</li>
<li>contains - the same as in</li>
<li>ncontains - the same as nin</li>
<li>match - fnmatch() (unix filename pattern matching) - fnmatch(B, A, 0) == 0</li>
</ul>
<p>Field operators are used for chaining arrays of logic operators and defining logic relations between them: i.e. ["and", [["A", "&gt;", 0], ["A", "&lt;", 4]]] There are following field operators allowed:</p><ul>
<li>and</li>
<li>or</li>
<li>nor</li>
</ul>
<p>Example of a complex rule: ["or", [["a.b.0.c", "=", 1], ["and", [["a.d", "&gt;", 2], ["a.d", "&lt;", 4]]]]]</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">object</td><td>Object to be queried. </td></tr>
    <tr><td class="paramname">params</td><td>Query parameters. </td></tr>
    <tr><td class="paramname">rules</td><td>Query rules. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Query iterator. </dd></dl>

</div>
</div>
<a id="ad32074f2b7671ae25b4076d085423a0f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad32074f2b7671ae25b4076d085423a0f">&#9670;&nbsp;</a></span>rpc_query_apply()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_Nullable <a class="el" href="object_8h.html#ab365f726b4975c0c8376b808d111d01b">rpc_object_t</a> rpc_query_apply </td>
          <td>(</td>
          <td class="paramtype">_Nonnull <a class="el" href="object_8h.html#ab365f726b4975c0c8376b808d111d01b">rpc_object_t</a>&#160;</td>
          <td class="paramname"><em>object</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">_Nonnull <a class="el" href="object_8h.html#ab365f726b4975c0c8376b808d111d01b">rpc_object_t</a>&#160;</td>
          <td class="paramname"><em>rules</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Checks if a given RPC object does match a provided object representing query rules (the same format as in the rpc_query function case).</p>
<p>If so, then the function does return the object increasing its reference count, otherwise it returns NULL.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">object</td><td>Object to be checked against a given set of rules. </td></tr>
    <tr><td class="paramname">rules</td><td>Set of query-like rules. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The object itself if is matches the rules, otherwise NULL. </dd></dl>

</div>
</div>
<a id="a530296c952ff239de8b91371227d36ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a530296c952ff239de8b91371227d36ba">&#9670;&nbsp;</a></span>rpc_query_contains()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool rpc_query_contains </td>
          <td>(</td>
          <td class="paramtype">_Nonnull <a class="el" href="object_8h.html#ab365f726b4975c0c8376b808d111d01b">rpc_object_t</a>&#160;</td>
          <td class="paramname"><em>object</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *_Nonnull&#160;</td>
          <td class="paramname"><em>path</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The function follows a given "key1.key2.0.key3.1" like path to check whether or not a given object does have an object under a given path set.</p>
<p>The function returns the boolean result of that check.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">object</td><td>Object to perform the lookup on. </td></tr>
    <tr><td class="paramname">path</td><td>Path to the object to be found - '.' character is required between each key/idx pair. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Boolean result of the check. </dd></dl>

</div>
</div>
<a id="af59ef4e3522115f09116bf7048738de4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af59ef4e3522115f09116bf7048738de4">&#9670;&nbsp;</a></span>rpc_query_delete()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rpc_query_delete </td>
          <td>(</td>
          <td class="paramtype">_Nonnull <a class="el" href="object_8h.html#ab365f726b4975c0c8376b808d111d01b">rpc_object_t</a>&#160;</td>
          <td class="paramname"><em>object</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *_Nonnull&#160;</td>
          <td class="paramname"><em>path</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The function follows a given "key1.key2.0.key3.1" like path to find the last element in the path inside of the provided object and delete it.</p>
<p>If the provided path does not match a given object, then library error is set.</p>
<p>rpc_query_set always tries to automatically add missing pieces of the provided path. Example: object = {} path = "some.0.values.1.and.indexes" value = true</p>
<p>result = {some:[{values:[null,{and:{indexes:true}}]}]}</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">object</td><td>Object to perform the lookup on. </td></tr>
    <tr><td class="paramname">path</td><td>Path to the object to be deleted - '.' character is required between each key/idx pair. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a674e1f4b009fc26f19dd33d0c5d0b10d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a674e1f4b009fc26f19dd33d0c5d0b10d">&#9670;&nbsp;</a></span>rpc_query_fmt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_Nullable <a class="el" href="query_8h.html#a927ba6540a1cd3a2f2cf5d20b39fdadd">rpc_query_iter_t</a> rpc_query_fmt </td>
          <td>(</td>
          <td class="paramtype">_Nonnull <a class="el" href="object_8h.html#ab365f726b4975c0c8376b808d111d01b">rpc_object_t</a>&#160;</td>
          <td class="paramname"><em>object</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">_Nonnull <a class="el" href="query_8h.html#a831694aa25fae9a6c3243911c3defb94">rpc_query_params_t</a>&#160;</td>
          <td class="paramname"><em>params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *_Nonnull&#160;</td>
          <td class="paramname"><em>rules_fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Performs a query operation on a given object.</p>
<p>The function works exactly the same as the rpc_query function, but does not require the user to provide rules as an assembled RPC object. Instead it assembles query rules on the fly using the rpc_object_pack function syntax.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">object</td><td>Object to be queried. </td></tr>
    <tr><td class="paramname">params</td><td>Query parameters. </td></tr>
    <tr><td class="paramname">rules_fmt</td><td>Rules rpc_object_pack like format string. </td></tr>
    <tr><td class="paramname">...</td><td>Variable length list of arguments to be assembled as query rules. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Query iterator. </dd></dl>

</div>
</div>
<a id="a6b66ceac8404c2581558e4fa3dfc048e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b66ceac8404c2581558e4fa3dfc048e">&#9670;&nbsp;</a></span>rpc_query_get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_Nullable <a class="el" href="object_8h.html#ab365f726b4975c0c8376b808d111d01b">rpc_object_t</a> rpc_query_get </td>
          <td>(</td>
          <td class="paramtype">_Nonnull <a class="el" href="object_8h.html#ab365f726b4975c0c8376b808d111d01b">rpc_object_t</a>&#160;</td>
          <td class="paramname"><em>object</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *_Nonnull&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">_Nullable <a class="el" href="object_8h.html#ab365f726b4975c0c8376b808d111d01b">rpc_object_t</a>&#160;</td>
          <td class="paramname"><em>default_val</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The function follows a given "key1.key2.0.key3.1" like path to find the last element in the path inside of the provided object and return it.</p>
<p>If the function cannot resolve the whole path (i.e. some of intermediate container objects does not have the required key specified), then a provided default value is returned.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">object</td><td>Object to perform the lookup on. </td></tr>
    <tr><td class="paramname">path</td><td>Search path - '.' character is required between each key/idx pair. </td></tr>
    <tr><td class="paramname">default_val</td><td>Default value to be returned if desired object couldn't be found - nullable. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Found RPC object or the default value. </dd></dl>

</div>
</div>
<a id="acfa3a9a25b98a0acd3a64c7c222e5f99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acfa3a9a25b98a0acd3a64c7c222e5f99">&#9670;&nbsp;</a></span>rpc_query_iter_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rpc_query_iter_free </td>
          <td>(</td>
          <td class="paramtype">_Nonnull <a class="el" href="query_8h.html#a927ba6540a1cd3a2f2cf5d20b39fdadd">rpc_query_iter_t</a>&#160;</td>
          <td class="paramname"><em>iter</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Releases internal contents of rpc query iterator structure and then the structure itself.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">iter</td><td>Structure to be freed. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a979b1dfd5f0fb3be66501ed3c7df3f78"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a979b1dfd5f0fb3be66501ed3c7df3f78">&#9670;&nbsp;</a></span>rpc_query_next()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool rpc_query_next </td>
          <td>(</td>
          <td class="paramtype">_Nonnull <a class="el" href="query_8h.html#a927ba6540a1cd3a2f2cf5d20b39fdadd">rpc_query_iter_t</a>&#160;</td>
          <td class="paramname"><em>iter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">_Nonnull <a class="el" href="object_8h.html#ab365f726b4975c0c8376b808d111d01b">rpc_object_t</a> *_Nullable&#160;</td>
          <td class="paramname"><em>chunk</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Yields the next RPC object matching params and rules stored within iterator structure.</p>
<p>If further iteration is still possible, returns true, otherwise false.</p>
<p>The function stores the current result in chunk argument. Chunk could be set to NULL only if there's internal error condition, there are no data matching given rules and params in the source object or when the user tries to iterate again over previously finished iterator structure.</p>
<p>Function automatically increases reference count of the returned RPC object.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">iter</td><td>Iterator structure. </td></tr>
    <tr><td class="paramname">chunk</td><td>Pointer to be set to the next result. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>"Continue iteration" boolean flag. </dd></dl>

</div>
</div>
<a id="a03159f0ef216c368c85ea63dd5a6cd64"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03159f0ef216c368c85ea63dd5a6cd64">&#9670;&nbsp;</a></span>rpc_query_set()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rpc_query_set </td>
          <td>(</td>
          <td class="paramtype">_Nonnull <a class="el" href="object_8h.html#ab365f726b4975c0c8376b808d111d01b">rpc_object_t</a>&#160;</td>
          <td class="paramname"><em>object</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *_Nonnull&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">_Nullable <a class="el" href="object_8h.html#ab365f726b4975c0c8376b808d111d01b">rpc_object_t</a>&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>steal</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The function follows a given "key1.key2.0.key3.1" like path to find the last element in the path inside of the provided object and set it to a given value.</p>
<p>If the provided path does not match a given object, then library error is set.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">object</td><td>Object to perform the lookup on. </td></tr>
    <tr><td class="paramname">path</td><td>Path to the object to be set - '.' character is required between each key/idx pair. </td></tr>
    <tr><td class="paramname">value</td><td>Value to be set. </td></tr>
    <tr><td class="paramname">steal</td><td>Boolean flag - if set, then the function does not increase refcount of a set value. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
